name: Cloudflare Pages Deploy

on:
  push:
    branches:
      - main
  workflow_dispatch:

jobs:
  deploy:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        account: ['account_1']  # 可扩展多个账户
    permissions:
      contents: read
      deployments: write

    env:
      account_1_api_token: 'TXDn4V-iYDFDz7iso02xmH2qP12VqAIexPrh2539'  # 您的全新 Token
      account_1_account_id: '79927cfd3333c7b3e2363958a2d58158'
      account_1_project_name: 'zipv-7700foxm'

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      # 如需构建静态文件（如 npm run build），请在此添加步骤
      # - run: npm install && npm run build

      - name: Deploy to Cloudflare Pages
        uses: andykenward/github-actions-cloudflare-pages@v3.0.0
        with:
          cloudflare-api-token: ${{ 
            matrix.account == 'account_1' && env.account_1_api_token }}
          cloudflare-account-id: ${{ 
            matrix.account == 'account_1' && env.account_1_account_id }}
          cloudflare-project-name: ${{ 
            matrix.account == 'account_1' && env.account_1_project_name }}
          directory: .  # 上传目录（静态文件根目录）；若构建输出为 dist 等，请修改为此目录
          github-token: ${{ secrets.GITHUB_TOKEN }}  # 可选，用于 GitHub 部署状态更新
